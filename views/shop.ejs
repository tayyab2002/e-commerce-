<%- include('./partials/header') %>
<% if(success.length>0){ %>
    <div
    id="flash-message"
      class="absolute top-5 left-1/2 -translate-x-1/2 -translate-y-1/2 p-3 rounded-md bg-green-500"
    >
      <span class="inline-block mt-1 mb-1 text-white"> <%= success %> </span>
    </div>
    <% } %>
<div class="w-full h-screen flex items-start px-20 py-20">
  <div class="w-[25%] flex h-screen flex-col items-start border-r-2 p-3">
    <div class="flex items-center gap-2">
      <h3>sort by</h3>
      <form action="/shop">
        <select class="border-[1px] px-2 py-1" name="sortby" id="">
          <option value="popular">Popular</option>
          <option value="newest">Newest</option>
        </select>
      </form>
    </div>
    <div class="flex flex-col mt-20">
      <a class="block w-fit mb-2" href="">New Collection</a>
      <a class="block w-fit mb-2" href="">All Products</a>
      <a class="block w-fit mb-2" href="">Discounted Products</a>
    </div>
    <div class="mt-32">
      <a class="block w-fit mb-2" href="">Filter by :</a>
      <a class="block w-fit mb-2" href="">Availability</a>
      <a class="block w-fit mb-2" href="">Discount</a>
    </div>
  </div>
  <div class="w-[75%] flex flex-col gap-5 h-screen p-5">
    <div class="w-[75%] flex flex-col gap-5 h-screen">
      <div class="flex items-start gap-5">
        <% products.forEach(function (product) { %>
        <div class="w-60">
          <div class="w-full h-52">
            <img
              class="w-full h-full object-cover"
              src="data:image/jpeg;base64, <%= product.image.toString('base64') %>"
              alt=""
            />
          </div>
          <div
            class="flex justify-between bg-[<%= product.panelcolor %>] items-center px-4 py-4 text-[<%=product.textcolor%>]"
          >
            <div>
              <h3><%= product.name %></h3>
              <h4>$ <%= product.price %></h4>
            </div>
            <a
              class="w-7 h-7 flex items-center justify-center rounded-full bg-gray-400"
              href="/addtocart/<%= product._id %>"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="w-4 h-4">
                <path
                  d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"
                />
              </svg>
            </a>
          </div>
        </div>
        <% }); %>
      </div>
    </div>
  </div>
</div>
<script>
    window.onload = function () {
      setTimeout(function () {
        var flashMessage = document.getElementById("flash-message");
        if (flashMessage) {
          flashMessage.style.display = "none";
        }
      }, 2000); 
    };
  </script>